"use strict";
const fs = require("fs");
const path = require("path");
function cliPluginMain(api, options, rootOptions) {
    api.extendPackage((pkg) => {
        console.log(`[Generator] extendPackage`);
        console.dir(pkg);
        pkg.devDependencies = {
            "@bluelovers/tsconfig": "^1.0.2",
            "@types/webpack-chain": "^5.2.0",
            "terser": "3.17.0",
            "terser-webpack-plugin": "^1.2.3",
            ...pkg.devDependencies,
        };
        return pkg;
    });
    console.log(`[Generator] options`);
    console.dir(options);
    console.log(`[Generator] rootOptions`);
    console.dir(rootOptions);
    let files_not_exists = Object.entries([
        'tsconfig.json',
        '.browserslistrc',
    ].reduce((a, file) => {
        a[file] = file;
        return a;
    }, Object.entries({
        '.gitignore': 'gitignore',
    }).reduce((a, [file, file2]) => {
        file2 = path.join('dot', file2);
        a[file] = file2;
        return a;
    }, {})))
        .reduce((a, [file, file2]) => {
        let fpath = api.resolve(file);
        let exists = fs.existsSync(fpath);
        if (!exists || options.replaceFiles) {
            let fpath2 = path.resolve(__dirname, 'files', file2);
            let exists2 = fs.existsSync(fpath2);
            if (exists2) {
                if (exists) {
                    let bak = fpath + '.bak';
                    if (fs.existsSync(bak)) {
                        if (!fs.readFileSync(fpath).equals(fs.readFileSync(bak))) {
                            console.log(`[Generator] backup ${file}`);
                            fs.unlinkSync(bak);
                            fs.copyFileSync(fpath, bak);
                        }
                        else {
                            console.log(`[Generator] skip backup ${file}`);
                        }
                    }
                    else {
                        console.log(`[Generator] backup ${file}`);
                        fs.copyFileSync(fpath, bak);
                    }
                }
                a[file] = fpath2;
            }
        }
        return a;
    }, {});
    api.onCreateComplete(() => {
        console.log(`\n`);
        console.log(`[Generator] onCreateComplete`);
        Object.entries(files_not_exists)
            .forEach(function ([file, fpath2]) {
            let fpath = api.resolve(file);
            let exists = fs.existsSync(fpath);
            if (exists) {
                console.log(`[Generator] overwrite ${file}`);
                let bak = fpath + '.bak';
                if (!fs.existsSync(bak)) {
                    fs.renameSync(fpath, bak);
                }
                fs.copyFileSync(fpath2, fpath);
            }
            else {
                console.log(`[Generator] create ${file}`);
                fs.copyFileSync(fpath2, fpath);
            }
        });
        console.log(`\n`);
    });
}
module.exports = cliPluginMain;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ2VuZXJhdG9yLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiZ2VuZXJhdG9yLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFFQSx5QkFBMEI7QUFDMUIsNkJBQThCO0FBOEQ5QixTQUFTLGFBQWEsQ0FBQyxHQUF3QixFQUM5QyxPQUFvRSxFQUNwRSxXQUF3QztJQUd4QyxHQUFHLENBQUMsYUFBYSxDQUFDLENBQUMsR0FBRyxFQUFFLEVBQUU7UUFHekIsT0FBTyxDQUFDLEdBQUcsQ0FBQywyQkFBMkIsQ0FBQyxDQUFDO1FBQ3pDLE9BQU8sQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUM7UUFFakIsR0FBRyxDQUFDLGVBQWUsR0FBRztZQUNyQixzQkFBc0IsRUFBRSxRQUFRO1lBQ2hDLHNCQUFzQixFQUFFLFFBQVE7WUFDaEMsUUFBUSxFQUFFLFFBQVE7WUFDbEIsdUJBQXVCLEVBQUUsUUFBUTtZQUVqQyxHQUFHLEdBQUcsQ0FBQyxlQUFlO1NBQ3RCLENBQUM7UUFFRixPQUFPLEdBQUcsQ0FBQTtJQUNYLENBQUMsQ0FBQyxDQUFDO0lBRUgsT0FBTyxDQUFDLEdBQUcsQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDO0lBQ25DLE9BQU8sQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLENBQUM7SUFFckIsT0FBTyxDQUFDLEdBQUcsQ0FBQyx5QkFBeUIsQ0FBQyxDQUFDO0lBQ3ZDLE9BQU8sQ0FBQyxHQUFHLENBQUMsV0FBVyxDQUFDLENBQUM7SUFFekIsSUFBSSxnQkFBZ0IsR0FBRyxNQUFNLENBQUMsT0FBTyxDQUFDO1FBQ3BDLGVBQWU7UUFDZixpQkFBaUI7S0FDakIsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUUsSUFBSSxFQUFFLEVBQUU7UUFHcEIsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQztRQUVmLE9BQU8sQ0FBQyxDQUFBO0lBQ1QsQ0FBQyxFQUFFLE1BQU0sQ0FBQyxPQUFPLENBQUM7UUFDakIsWUFBWSxFQUFFLFdB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QUcsQ0FBQyxDQUFDO2lCQUMxQjtnQkFFRCxFQUFFLENBQUMsWUFBWSxDQUFDLE1BQU0sRUFBRSxLQUFLLENBQUMsQ0FBQzthQUMvQjtpQkFFRDtnQkFDQyxPQUFPLENBQUMsR0FBRyxDQUFDLHNCQUFzQixJQUFJLEVBQUUsQ0FBQyxDQUFDO2dCQUMxQyxFQUFFLENBQUMsWUFBWSxDQUFDLE1BQU0sRUFBRSxLQUFLLENBQUMsQ0FBQzthQUMvQjtRQUNGLENBQUMsQ0FBQyxDQUNGO1FBRUQsT0FBTyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUNuQixDQUFDLENBQUMsQ0FBQztBQUNKLENBQUM7QUFFRCxpQkFBUyxhQUFhLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUHJlc2V0SnNvbiA9IHJlcXVpcmUoJy4vcHJlc2V0Lmpzb24nKTtcbmltcG9ydCBQYWNrYWdlSnNvbiA9IHJlcXVpcmUoJy4vcGFja2FnZS5qc29uJyk7XG5pbXBvcnQgZnMgPSByZXF1aXJlKCdmcycpO1xuaW1wb3J0IHBhdGggPSByZXF1aXJlKCdwYXRoJyk7XG5cbnR5cGUgSVBhY2thZ2VKc29uRmllbGRzID0gUGFydGlhbDx0eXBlb2YgUGFja2FnZUpzb24+ICYge1xuXHRzY3JpcHRzPzoge1xuXHRcdFtuYW1lOiBzdHJpbmddOiBzdHJpbmcsXG5cdH0sXG5cdGRlcGVuZGVuY2llcz86IHtcblx0XHRbbmFtZTogc3RyaW5nXTogc3RyaW5nLFxuXHR9LFxuXHRkZXZEZXBlbmRlbmNpZXM/OiB7XG5cdFx0W25hbWU6IHN0cmluZ106IHN0cmluZyxcblx0fSxcblx0cmVzb2x1dGlvbnM/OiB7XG5cdFx0W25hbWU6IHN0cmluZ106IHN0cmluZyxcblx0fSxcblxuXHRba2V5OiBzdHJpbmddOiB1bmtub3duLFxufVxuXG5pbnRlcmZhY2UgSVZ1ZUNsaUdlbmVyYXRvckFwaVxue1xuXHRleHRlbmRQYWNrYWdlPFQgZXh0ZW5kcyB7XG5cdFx0W2s6IHN0cmluZ106IHVua25vd24sXG5cdH0+KGZpZWxkczogVCAmIElQYWNrYWdlSnNvbkZpZWxkcyB8ICgocGtnOiBUICYgSVBhY2thZ2VKc29uRmllbGRzKSA9PiBUICYgSVBhY2thZ2VKc29uRmllbGRzKSk6IHZvaWRcblxuXHRyZXNvbHZlKF9wYXRoOiBzdHJpbmcpOiBzdHJpbmcsXG5cblx0aGFzUGx1Z2luKGlkOiBzdHJpbmcpOiBib29sZWFuLFxuXG5cdG9uQ3JlYXRlQ29tcGxldGUoY2I6ICgpID0+IGFueSk6IHZvaWRcbn1cblxuaW50ZXJmYWNlIElWdWVDbGlHZW5lcmF0b3JPcHRpb25zXG57XG5cdF9pc1ByZXNldD86IGJvb2xlYW4sXG5cdHByb21wdHM/OiBib29sZWFuLFxuXG5cdFtrOiBzdHJpbmddOiB1bmtub3duLFxufVxuXG50eXBlIElWdWVDbGlHZW5lcmF0b3JSb290T3B0aW9ucyA9IHR5cGVvZiBQcmVzZXRKc29uICYge1xuXHRwcm9qZWN0TmFtZTogc3RyaW5nLFxuXHR1c2VDb25maWdGaWxlczogYm9vbGVhbixcblx0cGx1Z2luczoge1xuXHRcdFtrOiBzdHJpbmddOiB7XG5cdFx0XHRbazogc3RyaW5nXTogdW5rbm93bixcblx0XHR9XG5cdH0sXG5cdHJvdXRlcjogYm9vbGVhbixcblx0cm91dGVySGlzdG9yeU1vZGU6IGJvb2xlYW4sXG5cdHZ1ZXg6IGJvb2xlYW4sXG5cdGNzc1ByZXByb2Nlc3NvcjogJ2RhcnQtc2FzcycgfCAnbm9kZS1zYXNzJyB8IHN0cmluZyxcblx0YmFyZTogdW5rbm93bixcblxuXHRbazogc3RyaW5nXTogdW5rbm93bixcbn1cblxuaW50ZXJmYWNlIElWdWVDbGlHZW5lcmF0b3JPcHRpb25zVGhpc1BsdWdpblxue1xuXHRyZXBsYWNlRmlsZXM6IGJvb2xlYW4sXG59XG5cbmZ1bmN0aW9uIGNsaVBsdWdpbk1haW4oYXBpOiBJVnVlQ2xpR2VuZXJhdG9yQXBpLFxuXHRvcHRpb25zOiBJVnVlQ2xpR2VuZXJhdG9yT3B0aW9ucyAmIElWdWVDbGlHZW5lcmF0b3JPcHRpb25zVGhpc1BsdWdpbixcblx0cm9vdE9wdGlvbnM6IElWdWVDbGlHZW5lcmF0b3JSb290T3B0aW9ucyxcbik6IHZvaWRcbntcblx0YXBpLmV4dGVuZFBhY2thZ2UoKHBrZykgPT5cblx0e1xuXG5cdFx0Y29uc29sZS5sb2coYFtHZW5lcmF0b3JdIGV4dGVuZFBhY2thZ2VgKTtcblx0XHRjb25zb2xlLmRpcihwa2cpO1xuXG5cdFx0cGtnLmRldkRlcGVuZGVuY2llcyA9IHtcblx0XHRcdFwiQGJsdWVsb3ZlcnMvdHNjb25maWdcIjogXCJeMS4wLjJcIixcblx0XHRcdFwiQHR5cGVzL3dlYnBhY2stY2hhaW5cIjogXCJeNS4yLjBcIixcblx0XHRcdFwidGVyc2VyXCI6IFwiMy4xNy4wXCIsXG5cdFx0XHRcInRlcnNlci13ZWJwYWNrLXBsdWdpblwiOiBcIl4xLjIuM1wiLFxuXG5cdFx0XHQuLi5wa2cuZGV2RGVwZW5kZW5jaWVzLFxuXHRcdH07XG5cblx0XHRyZXR1cm4gcGtnXG5cdH0pO1xuXG5cdGNvbnNvbGUubG9nKGBbR2VuZXJhdG9yXSBvcHRpb25zYCk7XG5cdGNvbnNvbGUuZGlyKG9wdGlvbnMpO1xuXG5cdGNvbnNvbGUubG9nKGBbR2VuZXJhdG9yXSByb290T3B0aW9uc2ApO1xuXHRjb25zb2xlLmRpcihyb290T3B0aW9ucyk7XG5cblx0bGV0IGZpbGVzX25vdF9leGlzdHMgPSBPYmplY3QuZW50cmllcyhbXG5cdFx0XHQndHNjb25maWcuanNvbicsXG5cdFx0XHQnLmJyb3dzZXJzbGlzdHJjJyxcblx0XHRdLnJlZHVjZSgoYSwgZmlsZSkgPT5cblx0XHR7XG5cblx0XHRcdGFbZmlsZV0gPSBmaWxlO1xuXG5cdFx0XHRyZXR1cm4gYVxuXHRcdH0sIE9iamVjdC5lbnRyaWVzKHtcblx0XHRcdCcuZ2l0aWdub3JlJzogJ2dpdGlnbm9yZScsXG5cdFx0fSkucmVkdWNlKChhLCBbZmlsZSwgZmlsZTJdKSA9PlxuXHRcdHtcblxuXHRcdFx0ZmlsZTIgPSBwYXRoLmpvaW4oJ2RvdCcsIGZpbGUyKTtcblx0XHRcdGFbZmlsZV0gPSBmaWxlMlxuXG5cdFx0XHRyZXR1cm4gYTtcblx0XHR9LCB7fSBhcyB7XG5cdFx0XHRbZmlsZTogc3RyaW5nXTogc3RyaW5nLFxuXHRcdH0pKSlcblx0XHQucmVkdWNlKChhLCBbZmlsZSwgZmlsZTJdKSA9PlxuXHRcdHtcblxuXHRcdFx0bGV0IGZwYXRoID0gYXBpLnJlc29sdmUoZmlsZSk7XG5cdFx0XHRsZXQgZXhpc3RzID0gZnMuZXhpc3RzU3luYyhmcGF0aCk7XG5cblx0XHRcdGlmICghZXhpc3RzIHx8IG9wdGlvbnMucmVwbGFjZUZpbGVzKVxuXHRcdFx0e1xuXHRcdFx0XHRsZXQgZnBhdGgyID0gcGF0aC5yZXNvbHZlKF9fZGlybmFtZSwgJ2ZpbGVzJywgZmlsZTIpO1xuXHRcdFx0XHRsZXQgZXhpc3RzMiA9IGZzLmV4aXN0c1N5bmMoZnBhdGgyKTtcblxuXHRcdFx0XHRpZiAoZXhpc3RzMilcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGlmIChleGlzdHMpXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0bGV0IGJhayA9IGZwYXRoICsgJy5iYWsnO1xuXG5cdFx0XHRcdFx0XHRpZiAoZnMuZXhpc3RzU3luYyhiYWspKVxuXHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRpZiAoIWZzLnJlYWRGaWxlU3luYyhmcGF0aCkuZXF1YWxzKGZzLnJlYWRGaWxlU3luYyhiYWspKSlcblx0XHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKGBbR2VuZXJhdG9yXSBiYWNrdXAgJHtmaWxlfWApO1xuXG5cdFx0XHRcdFx0XHRcdFx0ZnMudW5saW5rU3luYyhiYWspO1xuXHRcdFx0XHRcdFx0XHRcdGZzLmNvcHlGaWxlU3luYyhmcGF0aCwgYmFrKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRlbHNlXG5cdFx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0XHRjb25zb2xlLmxvZyhgW0dlbmVyYXRvcl0gc2tpcCBiYWNrdXAgJHtmaWxlfWApO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRlbHNlXG5cdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKGBbR2VuZXJhdG9yXSBiYWNrdXAgJHtmaWxlfWApO1xuXHRcdFx0XHRcdFx0XHRmcy5jb3B5RmlsZVN5bmMoZnBhdGgsIGJhayk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0YVtmaWxlXSA9IGZwYXRoMjtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gYVxuXHRcdH0sIHt9IGFzIHtcblx0XHRcdFtmaWxlOiBzdHJpbmddOiBzdHJpbmcsXG5cdFx0fSlcblx0O1xuXG5cdGFwaS5vbkNyZWF0ZUNvbXBsZXRlKCgpID0+XG5cdHtcblx0XHRjb25zb2xlLmxvZyhgXFxuYCk7XG5cblx0XHRjb25zb2xlLmxvZyhgW0dlbmVyYXRvcl0gb25DcmVhdGVDb21wbGV0ZWApO1xuXG5cdFx0T2JqZWN0LmVudHJpZXMoZmlsZXNfbm90X2V4aXN0cylcblx0XHRcdC5mb3JFYWNoKGZ1bmN0aW9uIChbZmlsZSwgZnBhdGgyXSlcblx0XHRcdHtcblx0XHRcdFx0bGV0IGZwYXRoID0gYXBpLnJlc29sdmUoZmlsZSk7XG5cdFx0XHRcdGxldCBleGlzdHMgPSBmcy5leGlzdHNTeW5jKGZwYXRoKTtcblxuXHRcdFx0XHRpZiAoZXhpc3RzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coYFtHZW5lcmF0b3JdIG92ZXJ3cml0ZSAke2ZpbGV9YCk7XG5cblx0XHRcdFx0XHRsZXQgYmFrID0gZnBhdGggKyAnLmJhayc7XG5cblx0XHRcdFx0XHRpZiAoIWZzLmV4aXN0c1N5bmMoYmFrKSlcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRmcy5yZW5hbWVTeW5jKGZwYXRoLCBiYWspO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGZzLmNvcHlGaWxlU3luYyhmcGF0aDIsIGZwYXRoKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRlbHNlXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhgW0dlbmVyYXRvcl0gY3JlYXRlICR7ZmlsZX1gKTtcblx0XHRcdFx0XHRmcy5jb3B5RmlsZVN5bmMoZnBhdGgyLCBmcGF0aCk7XG5cdFx0XHRcdH1cblx0XHRcdH0pXG5cdFx0O1xuXG5cdFx0Y29uc29sZS5sb2coYFxcbmApO1xuXHR9KTtcbn1cblxuZXhwb3J0ID0gY2xpUGx1Z2luTWFpblxuIl19